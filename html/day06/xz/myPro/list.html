<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Page Title</title>
</head>
<body onload="getList()">
    <table id="d1" border="1px"></table>
    <script>
        function getList() {
            var xhr = new XMLHttpRequest()
            xhr.onreadystatechange = function(){
                if (xhr.readyState == 4 && xhr.status == 200) {
                    d1.innerHTML = `<tr>
                                        <th>用户名</th>
                                        <th>用户密码</th>
                                        <th>邮箱</th>
                                        <th>电话</th>
                                        <th>头像</th>
                                        <th>真实姓名</th>
                                        <th>性别</th>
                                        <th>操作</th>
                                    </tr>`
                    var result = xhr.responseText
                    var arr = JSON.parse(result)
                    for (const obj of arr) {
                        d1.innerHTML += `<tr>
                                            <td>${obj.uname}</td>
                                            <td>${obj.upwd}</td>
                                            <td>${obj.email}</td>
                                            <td>${obj.phone}</td>
                                            <td>${obj.avatar}</td>
                                            <td>${obj.user_name}</td>
                                            <td>${obj.gender == 1 ?'男':'女'}</td>
                                            <td><a href = "/myPro/delete?uid=${obj.uid}">删除</a></td>
                                        </tr>`
                    }
                }
            }
            xhr.open('get','/myPro/list',true)
            xhr.send(null)
        }
    </script>
</body>
</html>